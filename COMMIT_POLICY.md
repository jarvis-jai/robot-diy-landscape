# 📝 COMMIT_POLICY.md - 內容層 Commit 門檻

本文件定義何時可以 commit，何時必須 SKIP。

---

## 核心原則

> **寧可 SKIP，不可空轉**

每次 commit 必須帶來**實質進展**。如果本輪產出不足，SKIP 是正確的行為。

---

## ALLOW（可以 Commit）的條件

符合以下**任一條件**即可 commit：

### 條件 A：新增條目
- 新增 **≥8 個**符合 schema 的新條目
- 每個條目必須完整填寫所有 schema 欄位
- 條目必須已加入 `data/visited_urls.csv`

### 條件 B：新增 Gap Hypothesis
- 新增 **≥2 條**有佐證的 gap hypothesis
- 每條 gap 必須引用 **≥2 個 landscape 條目**（見 CONSTITUTION 規則 3）
- 引用格式：`[Name](landscape/xxx.md)`

### 條件 C：結構重構
- 新增或重構分類結構（讓地圖更清晰）
- 必須在 commit message 中說明改動理由
- 範例：拆分過大的類別、合併重複類別、新增子分類

### 條件 D：補強既有條目
- 明確補強 **≥3 個**既有條目
- 每個補強必須新增**可驗證的新資訊**
- 補強時須標註日期與來源
- 範例：更新活躍度數據、補充新的弱項觀察

---

## SKIP（不 Commit）的情況

未達上述任一門檻時，**必須 SKIP**：

### SKIP 時的行為
1. **不得改動 working tree**
   ```bash
   git checkout .
   git clean -fd
   ```
2. 記錄 SKIP 原因（不 commit，僅供下次參考）
3. 考慮調整策略（換 focus、換 query、換管道）

### 常見 SKIP 原因
- 只找到 1-2 個新條目（不足 8 個門檻）
- 找到的網站都已在 visited 中
- 網站品質不足（死站、內容稀薄）
- 本輪時間不足完成門檻

---

## SKIP 不是失敗

**重要**：SKIP 是健康的行為，代表：
- 你誠實評估了產出品質
- 你避免了低品質 commit 污染 repo
- 你保持了 commit 歷史的乾淨

寧可一週 SKIP 3 次 + commit 2 次高品質，也不要 5 次低品質 commit。

---

## 門檻調整

如果長期（>2 週）難以達到門檻，可考慮：
1. 降低新增條目門檻（8 → 5）
2. 增加單次探索時間
3. 調整 focus 策略

任何門檻調整須在本文件中記錄，並說明原因。

---

## 當前門檻設定

| 條件 | 門檻 | 狀態 |
|------|------|------|
| 新增條目 | ≥8 個 | 生效中 |
| 新增 Gap | ≥2 條（每條 ≥2 佐證） | 生效中 |
| 結構重構 | 需說明理由 | 生效中 |
| 補強條目 | ≥3 個（每個需新資訊） | 生效中 |

---

*最後更新：2025-01-30*
